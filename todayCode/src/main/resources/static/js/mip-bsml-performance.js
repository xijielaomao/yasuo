"use strict";define("mip-bsml-performance/serialize",["require"],function(e){function t(e){return s[e]}function i(e,i){function s(e,t){if(!t)return t;var i=this[e],a=typeof i;if("object"===a){if(i instanceof RegExp)return"@__R-"+n+"-"+(u.push(i)-1)+"__@";if(i instanceof Date)return"@__D-"+n+"-"+(d.push(i)-1)+"__@"}if("function"===a)return"@__F-"+n+"-"+(c.push(i)-1)+"__@";else return t}if(i||(i={}),"number"==typeof i||"string"==typeof i)i={space:i};var l,c=[],u=[],d=[];if(i.isJSON&&!i.space)l=JSON.stringify(e);else l=JSON.stringify(e,i.isJSON?null:s,i.space);if("string"!=typeof l)return String(l);if(i.unsafe!==!0)l=l.replace(o,t);if(0===c.length&&0===u.length&&0===d.length)return l;else return l.replace(a,function(e,t,i){if("D"===t)return'new Date("'+d[i].toISOString()+'")';if("R"===t)return u[i].toString();var n=c[i],a=n.toString();if(r.test(a))throw new TypeError("Serializing native function: "+n.name);return a})}var n=Math.floor(1099511627776*Math.random()).toString(16),a=new RegExp('"@__(F|R|D)-'+n+'-(\\d+)__@"',"g"),r=/\{\s*\[native code\]\s*\}/g,o=/[<>\/\u2028\u2029]/g,s={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};return i}),define("mip-bsml-performance/mip-bsml-performance",["require","customElement","./serialize"],function(e){function t(e){try{var t=JSON.stringify(e);window.addLog(t)}catch(e){}}function i(e){try{return JSON.parse(r(e))}catch(e){return{}}}function n(){var e=window.performance?i(window.performance):"",n=navigator.connection.type||"",a={navigation:e.navigation,timeOrigin:e.timeOrigin,timing:e.timing,connectType:n},r={action_id:"site_page_performance",action_name:"performance埋点",extra:{performance_timing:a}};t(r)}var a=e("customElement").create(),r=e("./serialize");return a.prototype.build=function(){window.addEventListener("load",function(){n()},!1)},a}),define("mip-bsml-performance",["mip-bsml-performance/mip-bsml-performance"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-bsml-performance",t)}if(window.MIP)require(["mip-bsml-performance"],function(t){e(window.MIP,t)});else require(["mip","mip-bsml-performance"],e)}();