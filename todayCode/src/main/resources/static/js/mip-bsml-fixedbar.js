function rand16Num(t){for(var i=[],e=0;e<t;e++)i.push("0123456789abcdef".charAt(Math.floor(16*Math.random())));return i.join("")}define("mip-bsml-fixedbar/mip-bsml-fixedbar",["require","customElement","zepto","util"],function(t){function i(t,i,e){n.ajax({url:i,type:e,data:t,cache:!1,dataType:"jsonp",success:function(t){if("string"==typeof t.data)window.randomval=t.data}})}function e(t){var i=JSON.stringify(t);window.addLog(i)}var s=t("customElement").create(),n=t("zepto"),o=t("util"),r=o.platform,a=2,l="http://isite.baidu.com/feedflow/form/jumpto?";if(window.imlpSdkToBCPFollowTest){var c="255";!function(){var t={path:"/cip-golfr/ChannelService/getChannelValue",params:{stat:getQueryString("stat")||"",path:"/cip-golfr/ChannelService/getChannelValue"},successCB:function(t){if(200===t.status&&t.data)c=t.data.channelType}};window._bsmlUtils.ajaxRequest(t)}()}return s.prototype.build=function(){function t(t,i){var e="0"===b||"1"===b,s={t:i};e&&window._agl&&window._agl.push(["track",[t,s]])}var s=this,o=s.element,h=n(document.documentElement),d=n("body.with-header").css("padding-top")||"",p=n(window).height()-(n(".mip-shell-header-wrapper").height()||d.substring(0,d.lastIndexOf("px"))||0),u=n("#pageinfo"),f=u.attr("siteid"),m=u.attr("pagename"),v=u.attr("pagetype"),g=u.attr("pageid"),b=u.attr("appid"),y=u.attr("ucid"),x=u.attr("vpUcid"),w=(u.attr("guid"),document.referrer,0),S={};if(S.pageid=g,S.merchantid=n(o).find(".bsml-form-list-submit").attr("data-ucid"),S.siteid=f,S.prod=a,S.appid=b,S.clkid=window.pvid,2===+S.appid){var T={page:1,detail:2,serviceDetail:3,caseDetail:4};S.prod=T[m],S.merchantid=y,S.pvid=window.pvid}h.find(".mip-bsml-fixed-bar-box-phone a").css({display:"block"});var E=n(o).parents(".mip-element.mip-layout-container"),k=E.last().parent().is(".body-wrapper");i({},"https://isite.baidu.com/feedflow/form/randomval","get"),h.on("click",".mip-bsml-fixed-bar-box-appointment",function(){w=window.pageYOffset;var i=n(this).attr("id"),s=n(o).find(".bsml-form").attr("id");if(i=i&&i.trim().replace(/[0-9]+$/g,""),s=s&&s.trim().replace(/[0-9]+$/g,""),i===s){if(n(".body-wrapper").css({overflow:"hidden","min-height":p,height:p}),n(o).find(".bsml-form-lay").fadeIn("fast").css({height:p,position:"fixed"}),n(this).attr("data-id"))n(o).find(".bsml-form").hide(),n(o).find(".bsml-form[data-id="+n(this).attr("data-id")+"]").show(),n(o).find(".bsml-form").filter("[data-id="+n(this).attr("data-id")+"]").animate({bottom:"0"},"fast").css({position:"fixed","padding-bottom":"1.3rem"});else n(o).find(".bsml-form").animate({bottom:"0"},"fast").css({position:"fixed","padding-bottom":"1.3rem"});if(r.isIos()&&k)n("body").children("div").not(".body-wrapper").not("script").hide(),n(o).css("position","static"),E.css("position","static"),n(".body-wrapper").css("box-sizing","border-box"),n(o).find(".bsml-form").css("position","absolute");window._hmt=window._hmt||[],window._hmt.push(["_trackPageview","/mip/yxy/action/"+f+"/"+g+"/"+m+"/"+v+"/appointment"]);var a={action_id:"site_bar_click",action_name:"转化组件点击",type:"book"};e(a),t("mmp-click",5)}});var P=".mip-bsml-fixed-bar-box-consult, .mip-bsml-fixed-bar-three-box-consult, .mip-bsml-fixed-bar-two-box-consult";h.on("click",P,function(){window._hmt=window._hmt||[],window._hmt.push(["_trackPageview","/mip/yxy/action/"+f+"/"+g+"/"+m+"/"+v+"/consult"]);var s=n(this).find("a").attr("href")||"",o=""+window.randomval+(new Date).getTime();S.jsonval={contact_url:encodeURIComponent(s)},S.type=2,i(S,"https://isite.baidu.com/feedflow/form/submit","post");var r={action_id:"site_bar_click",action_name:"转化组件点击",type:"msg",target:s,uuid:o};if(t("mmp-click",1),window.imlpSdkFollowTest)if(s&&s.indexOf("urlType")>-1){var a=s.split("?")[0],h=s.split("?")[1],d=window._bsmlUtils.parseSearch(h);if(window.imlpSdkToBCPFollowTest){var p=(new Date).getTime()+rand16Num(23),u={0:"hao",1:"hao",2:"hao",3:"feed",4:"fc",5:"baiyi",6:"feed",7:"other",255:"other"},b=function(){return{action_id:"site_to_imlp",imlp_access_id:p,advice_type:d.adviceType}};e(b()),window._bsmlUtils.callImlp({imlpAccessId:p,channel:u[c]||"other",imlpLink:a+"?imid="+d.imid,adviceType:d.adviceType,exUserId:d.exUserId,siteId:d.siteId,groupId:d.groupId,appId:"cip"})}else window._bsmlUtils.callImlp({imlpLink:a+"?imid="+d.imid,adviceType:d.adviceType,exUserId:d.exUserId,siteId:d.siteId,groupId:d.groupId,appId:"cip"})}else e(r),location.href=l+"targeturl="+encodeURIComponent(s)+"&randomval="+o+"&referurl="+encodeURIComponent(window.location.href);else e(r),location.href=l+"targeturl="+encodeURIComponent(s)+"&randomval="+o+"&referurl="+encodeURIComponent(window.location.href);return!1});var Y=".mip-bsml-fixed-bar-box-phone, .mip-bsml-fixed-bar-three-box-phone, .mip-bsml-fixed-bar-two-box-phone";if(h.on("click",Y,function(){window._hmt=window._hmt||[],window._hmt.push(["_trackPageview","/mip/yxy/action/"+f+"/"+g+"/"+m+"/"+v+"/phone"]);var s=n(this).find("a").attr("href").substr(4)||"";S.jsonval={phone_num:s},S.type=0,i(S,"https://isite.baidu.com/feedflow/form/submit","post");var o={action_id:"site_bar_click",action_name:"转化组件点击",type:"tel",target:s};e(o),t("mmp-click",2)}),n(o).on("touchend",".bsml-form-close",function(t){if(t.preventDefault(),n(".body-wrapper").css({overflow:"initial",height:"auto"}),n(o).find(".bsml-form-lay").hide(),r.isIos()&&k)n("body").children("div").not(".body-wrapper").not("script").show(),n(o).find(".bsml-form").css("position","fixed");n(o).find(".bsml-form").animate({bottom:"-800px"},"fast"),n(window).scrollTop(w)}),n(o).on("click",".bsml-form-lay",function(){if(n(".body-wrapper").css({overflow:"initial",height:"auto"}),n(o).find(".bsml-form-lay").hide(),r.isIos()&&k)n("body").children("div").not(".body-wrapper").not("script").show(),n(o).find(".bsml-form").css("position","fixed");n(o).find(".bsml-form").animate({bottom:"-800px"},"fast"),n(window).scrollTop(w)}),y&&x)!function(t,i,e,s,n){function o(t){var i;if(reg=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),i=document.cookie.match(reg))return unescape(i[2]);else return null}t[s]=t[s]||{},t[s]["phonetracker.start"]=(new Date).getTime(),t[s].uid=n;var r=i.getElementsByTagName(e)[0],a=i.createElement(e);a.asyn=!0,a.src="//ada.baidu.com/phone-tracker/getjs?uid="+n+"&from=self&referer="+encodeURIComponent(document.referrer)+"&cookie_BD_IS_FROM_FC_AD="+o("BD_IS_FROM_FC_AD"),r.parentNode.insertBefore(a,r)}(window,document,"script","bdDataLayer",x)},s}),define("mip-bsml-fixedbar",["mip-bsml-fixedbar/mip-bsml-fixedbar"],function(t){return t}),function(){function t(t,i){t.registerMipElement("mip-bsml-fixedbar",i)}if(window.MIP)require(["mip-bsml-fixedbar"],function(i){t(window.MIP,i)});else require(["mip","mip-bsml-fixedbar"],t)}();